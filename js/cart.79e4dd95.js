"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[511],{3568:function(t,e,s){s.d(e,{Z:function(){return o}});var a=s(4589),r=s(8085),i=s(3325),o=(0,i.Z)(r.Z).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes(){return{"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom,...this.themeClasses}}},methods:{genWrapper(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:(0,a.kb)(this.height)}},[this.$createElement("table",this.$slots.default)])}},render(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},623:function(t,e,s){s.r(e),s.d(e,{default:function(){return C}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("div",{staticClass:"table"},[s("h1",[t._v("總熱量 "+t._s(t.total)+" 大卡 ")]),s("v-divider",{staticClass:"mx-4"}),s("v-simple-table",{staticClass:"elevation-1",scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[t._v("Name")]),s("th",{staticClass:"text-left"},[t._v("Calories")]),s("th",{staticClass:"text-left"},[t._v("image")]),s("th",{staticClass:"text-left"},[t._v("操作")])])]),s("tbody",t._l(t.products,(function(e,a){return s("tr",{key:e.denny},[s("td",[t._v(t._s(e.product.name))]),s("td",[t._v(t._s(e.product.price))]),s("td",[s("img",{staticStyle:{width:"100px"},attrs:{src:e.product.image}})]),s("td",[s("v-row",[s("v-col",[s("v-form",{ref:"form",refInFor:!0},[s("v-text-field",{attrs:{outlined:"",type:"number",required:"",min:"1"},on:{input:function(e){return t.updateCart(a,t.products[a].quantity)}},model:{value:t.products[a].quantity,callback:function(e){t.$set(t.products[a],"quantity",e)},expression:"products[index].quantity"}})],1)],1),s("v-col",[s("v-btn",{staticClass:"mt-5",on:{click:function(e){return t.updateCart(a,0)}}},[t._v("刪除")])],1)],1)],1)])})),0)]},proxy:!0}])})],1)])},r=[],i={data(){return{products:[]}},methods:{async updateCart(t,e){try{await this.api.patch("/users/me/cart",{product:this.products[t].product._id,quantity:e},{headers:{authorization:"Bearer "+this.user.token}}),0===e&&(this.products.splice(t,1),this.$store.commit("user/updateCart",this.user.cart-1))}catch(s){console.log(s),this.$swal({icon:"error",title:"失敗",text:"修改購物車失敗"})}}},computed:{total(){return this.products.reduce(((t,e)=>t+e.quantity*e.product.price),0)}},async created(){try{const{data:t}=await this.api.get("/users/me/cart",{headers:{authorization:"Bearer "+this.user.token}});this.products=t.result}catch(t){this.$swal({icon:"error",title:"失敗",text:"取得購物車失敗"})}}},o=i,n=s(1001),l=s(3453),c=s.n(l),d=s(680),u=s(2102),h=s(4228),p=s(1418),v=s(6232),f=s(2877),m=s(3568),b=s(5978),x=(0,n.Z)(o,a,r,!1,null,"01cee173",null),C=x.exports;c()(x,{VBtn:d.Z,VCol:u.Z,VContainer:h.Z,VDivider:p.Z,VForm:v.Z,VRow:f.Z,VSimpleTable:m.Z,VTextField:b.Z})}}]);
//# sourceMappingURL=cart.79e4dd95.js.map