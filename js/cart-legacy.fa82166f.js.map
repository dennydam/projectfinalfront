{"version":3,"file":"js/cart-legacy.fa82166f.js","mappings":"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","sources":["webpack://front/../../../src/components/VDataTable/VSimpleTable.ts","webpack://front/./src/views/CartD.vue?73e7","webpack://front/src/views/CartD.vue","webpack://front/./src/views/CartD.vue?de07","webpack://front/./src/views/CartD.vue"],"sourcesContent":["import './VSimpleTable.sass'\n\nimport { convertToUnit } from '../../util/helpers'\nimport Themeable from '../../mixins/themeable'\nimport mixins from '../../util/mixins'\nimport { VNode } from 'vue'\n\nexport default mixins(Themeable).extend({\n  name: 'v-simple-table',\n\n  props: {\n    dense: Boolean,\n    fixedHeader: Boolean,\n    height: [Number, String],\n  },\n\n  computed: {\n    classes (): Record<string, boolean> {\n      return {\n        'v-data-table--dense': this.dense,\n        'v-data-table--fixed-height': !!this.height && !this.fixedHeader,\n        'v-data-table--fixed-header': this.fixedHeader,\n        'v-data-table--has-top': !!this.$slots.top,\n        'v-data-table--has-bottom': !!this.$slots.bottom,\n        ...this.themeClasses,\n      }\n    },\n  },\n\n  methods: {\n    genWrapper () {\n      return this.$slots.wrapper || this.$createElement('div', {\n        staticClass: 'v-data-table__wrapper',\n        style: {\n          height: convertToUnit(this.height),\n        },\n      }, [\n        this.$createElement('table', this.$slots.default),\n      ])\n    },\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-data-table',\n      class: this.classes,\n    }, [\n      this.$slots.top,\n      this.genWrapper(),\n      this.$slots.bottom,\n    ])\n  },\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('div',{staticClass:\"table\"},[_c('h1',[_vm._v(\"總熱量 \"+_vm._s(_vm.total)+\" 大卡 \")]),_c('v-divider',{staticClass:\"mx-4\"}),_c('v-simple-table',{staticClass:\"elevation-1\",scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"text-left\"},[_vm._v(\"Name\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Calories\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"image\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"操作\")])])]),_c('tbody',_vm._l((_vm.products),function(item,index){return _c('tr',{key:item.denny},[_c('td',[_vm._v(_vm._s(item.product.name))]),_c('td',[_vm._v(_vm._s(item.product.price))]),_c('td',[_c('img',{staticStyle:{\"width\":\"100px\"},attrs:{\"src\":item.product.image}})]),_c('td',[_c('v-row',[_c('v-col',{staticClass:\"mt-5\"},[_c('v-form',{ref:\"form\",refInFor:true},[_c('v-text-field',{attrs:{\"outlined\":\"\",\"type\":\"number\",\"required\":\"\",\"min\":\"1\"},on:{\"input\":function($event){return _vm.updateCart(index, _vm.products[index].quantity)}},model:{value:(_vm.products[index].quantity),callback:function ($$v) {_vm.$set(_vm.products[index], \"quantity\", $$v)},expression:\"products[index].quantity\"}})],1)],1),_c('v-col',[_c('v-btn',{staticClass:\"mt-6\",on:{\"click\":function($event){return _vm.updateCart(index, 0)}}},[_vm._v(\"刪除\")])],1)],1)],1)])}),0)]},proxy:true}])})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n  <v-container>\n    <div class=\"table\">\n      <h1>總熱量 {{ total }} 大卡 </h1>\n      <v-divider class=\"mx-4\"></v-divider>\n      <v-simple-table class=\"elevation-1\" >\n        <template v-slot:default>\n          <thead>\n            <tr>\n              <th class=\"text-left\">Name</th>\n              <th class=\"text-left\">Calories</th>\n              <th class=\"text-left\">image</th>\n              <th class=\"text-left\">操作</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(item, index) in products\" :key=\"item.denny\">\n              <td>{{ item.product.name }}</td>\n              <td>{{ item.product.price }}</td>\n              <td><img :src=\"item.product.image\" style=\"width: 100px\" /></td>\n              <td>\n                <v-row>\n                  <v-col class=\"mt-5\">\n                    <v-form ref=\"form\">\n                      <v-text-field\n                        outlined\n                        v-model=\"products[index].quantity\"\n                        type=\"number\"\n                        required\n                        min=\"1\"\n                        @input=\"updateCart(index, products[index].quantity)\"\n                      >\n                      </v-text-field>\n                    </v-form>\n                  </v-col>\n                  <v-col>\n                    <v-btn class=\"mt-6\" @click=\"updateCart(index, 0)\"\n                      >刪除</v-btn\n                    >\n                  </v-col>\n                </v-row>\n              </td>\n            </tr>\n          </tbody>\n        </template>\n      </v-simple-table>\n    </div>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      products: []\n    }\n  },\n  methods: {\n    async updateCart (index, quantity) {\n      try {\n        await this.api.patch(\n          '/users/me/cart',\n          { product: this.products[index].product._id, quantity },\n          {\n            headers: {\n              authorization: 'Bearer ' + this.user.token\n            }\n          }\n        )\n        if (quantity === 0) {\n          this.products.splice(index, 1)\n          this.$store.commit('user/updateCart', this.user.cart - 1)\n        }\n      } catch (error) {\n        console.log(error)\n        this.$swal({\n          icon: 'error',\n          title: '失敗',\n          text: '修改購物車失敗'\n        })\n      }\n    }\n  },\n  computed: {\n    total () {\n      return this.products.reduce((accumulator, currentValue) => {\n        return accumulator + currentValue.quantity * currentValue.product.price\n      }, 0)\n    }\n  },\n  async created () {\n    try {\n      const { data } = await this.api.get('/users/me/cart', {\n        headers: {\n          authorization: 'Bearer ' + this.user.token\n        }\n      })\n      this.products = data.result\n    } catch (error) {\n      this.$swal({\n        icon: 'error',\n        title: '失敗',\n        text: '取得購物車失敗'\n      })\n    }\n  }\n}\n</script>\n<style scoped>\n.table {\n  border-radius: 10px ;\n  width: 80%;\n  margin: auto;\n  margin-top: 200px;\n}\n.bb {\n  width: 100%;\n  padding: 151px;\n  margin-right: auto;\n  margin-left: auto;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CartD.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CartD.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CartD.vue?vue&type=template&id=25fd7e14&scoped=true&\"\nimport script from \"./CartD.vue?vue&type=script&lang=js&\"\nexport * from \"./CartD.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CartD.vue?vue&type=style&index=0&id=25fd7e14&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"25fd7e14\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCol,VContainer,VDivider,VForm,VRow,VSimpleTable,VTextField})\n"],"names":["mixins","name","props","dense","fixedHeader","height","Number","String","computed","classes","this","$slots","themeClasses","methods","genWrapper","wrapper","$createElement","staticClass","style","render","h","class","_vm","_h","_c","_self","_v","_s","total","scopedSlots","_u","key","fn","_l","item","index","denny","product","price","staticStyle","attrs","image","ref","refInFor","on","$event","updateCart","products","quantity","model","value","callback","$$v","$set","expression","proxy","staticRenderFns","data","reduce","accumulator","currentValue","component","VBtn"],"sourceRoot":""}