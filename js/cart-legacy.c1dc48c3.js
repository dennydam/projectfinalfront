"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[511],{3568:function(t,e,r){r.d(e,{Z:function(){return o}});var a=r(4367),s=(r(9653),r(4589)),n=r(8085),i=r(3325),o=(0,i.Z)(n.Z).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return(0,a.Z)({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:(0,s.kb)(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},623:function(t,e,r){r.r(e),r.d(e,{default:function(){return _}});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("div",{staticClass:"table"},[r("h1",[t._v("總熱量 "+t._s(t.total)+" 大卡 ")]),r("v-divider",{staticClass:"mx-4"}),r("v-simple-table",{staticClass:"elevation-1",scopedSlots:t._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[t._v("Name")]),r("th",{staticClass:"text-left"},[t._v("Calories")]),r("th",{staticClass:"text-left"},[t._v("image")]),r("th",{staticClass:"text-left"},[t._v("操作")])])]),r("tbody",t._l(t.products,(function(e,a){return r("tr",{key:e.denny},[r("td",[t._v(t._s(e.product.name))]),r("td",[t._v(t._s(e.product.price))]),r("td",[r("img",{staticStyle:{width:"100px"},attrs:{src:e.product.image}})]),r("td",[r("v-row",[r("v-col",[r("v-form",{ref:"form",refInFor:!0},[r("v-text-field",{attrs:{outlined:"",type:"number",required:"",min:"1"},on:{input:function(e){return t.updateCart(a,t.products[a].quantity)}},model:{value:t.products[a].quantity,callback:function(e){t.$set(t.products[a],"quantity",e)},expression:"products[index].quantity"}})],1)],1),r("v-col",[r("v-btn",{staticClass:"mt-5",on:{click:function(e){return t.updateCart(a,0)}}},[t._v("刪除")])],1)],1)],1)])})),0)]},proxy:!0}])})],1)])},s=[],n=r(6198),i=(r(5666),r(561),r(1539),{data:function(){return{products:[]}},methods:{updateCart:function(t,e){var r=this;return(0,n.Z)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.api.patch("/users/me/cart",{product:r.products[t].product._id,quantity:e},{headers:{authorization:"Bearer "+r.user.token}});case 3:0===e&&(r.products.splice(t,1),r.$store.commit("user/updateCart",r.user.cart-1)),a.next=10;break;case 6:a.prev=6,a.t0=a["catch"](0),console.log(a.t0),r.$swal({icon:"error",title:"失敗",text:"修改購物車失敗"});case 10:case"end":return a.stop()}}),a,null,[[0,6]])})))()}},computed:{total:function(){return this.products.reduce((function(t,e){return t+e.quantity*e.product.price}),0)}},created:function(){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/users/me/cart",{headers:{authorization:"Bearer "+t.user.token}});case 3:r=e.sent,a=r.data,t.products=a.result,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"失敗",text:"取得購物車失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}),o=i,u=r(1001),c=r(3453),l=r.n(c),d=r(680),p=r(2102),h=r(4228),f=r(1418),v=r(6232),m=r(2877),x=r(3568),b=r(5978),C=(0,u.Z)(o,a,s,!1,null,"01cee173",null),_=C.exports;l()(C,{VBtn:d.Z,VCol:p.Z,VContainer:h.Z,VDivider:f.Z,VForm:v.Z,VRow:m.Z,VSimpleTable:x.Z,VTextField:b.Z})}}]);
//# sourceMappingURL=cart-legacy.c1dc48c3.js.map