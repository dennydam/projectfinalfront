"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[198],{1572:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-dialog",{attrs:{id:"modal-product",persistent:"","max-width":"1000"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({staticClass:"additem",attrs:{color:"primary",dark:"",width:"250px"}},"v-btn",n,!1),a),[e._v(" 我要發問 ")])]}}]),model:{value:e.dialog1,callback:function(t){e.dialog1=t},expression:"dialog1"}},[r("div",{staticClass:"container01"},[r("v-card",[r("v-container",[r("v-form",{ref:"form"},[r("v-text-field",{attrs:{type:"text",required:"",placeholder:"請輸入討論主題",state:e.state.name,outlined:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("v-form",{ref:"form"},[r("v-textarea",{staticClass:"mt-10",attrs:{state:e.state.description,required:"",rows:"3","max-rows":"6",placeholder:"請描述問題",color:"teal"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"green darken-1",text:"",disabled:e.modalSubmitting},on:{click:e.submitModal}},[e._v(" 送出 ")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialog1=!1}}},[e._v(" 取消 ")])],1)],1)],1)],1)]),r("v-container",{attrs:{"mt-16":""}},[r("v-row",e._l(e.products2,(function(t){return r("v-col",{key:t._id,attrs:{align:"center",justify:"center",cols:"12",lg:"4",sm:"6"}},[r("v-card",{staticClass:"discuss",attrs:{elevation:"12",outlined:"",shaped:"","max-width":"344"}},[r("h1",[e._v("主題:"+e._s(t.name))]),r("v-card-text"),r("v-card-text",[e._v(e._s(t.description)+" ")]),r("v-divider",{staticClass:"mx-4"}),r("v-card-actions",[r("v-icon",[e._v("mdi-account")]),r("p",{staticClass:"mt-4"},[e._v(e._s(e.user.account))]),r("v-spacer"),r("v-btn",{on:{click:function(r){return e.discussopen(t)}}},[e._v("cc ")])],1)],1)],1)})),1),r("v-dialog",{attrs:{"max-width":"900"},model:{value:e.discuss,callback:function(t){e.discuss=t},expression:"discuss"}},[r("v-card",{attrs:{"mt-10":""}},[r("v-container",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[r("h1",[e._v("主題:"+e._s(e.form.name))])]),r("v-card-text",[r("v-card-text",[e._v("描述: "+e._s(e.form.description))]),r("v-divider",{staticClass:"mx-4 my-4"}),e._l(e.form.messages,(function(t){return r("v-card-text",{key:t._D,attrs:{"d-flex":""}},[r("v-row",{staticClass:"d-flex"},[r("v-icon",[e._v("mdi-account")]),r("p",{staticClass:"my-5"},[e._v(e._s(t.account)+":"+e._s(t.text))]),r("v-spacer"),r("p",{staticClass:"my-5"},[e._v(e._s(t.date))])],1),r("v-divider",{staticClass:"mx-4 my-4"})],1)}))],2),r("v-text-field",{attrs:{outlined:"","append-outer-icon":"mdi-send"},on:{"click:append-outer":function(t){return e.sendmessage()}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)],1)],1)],1)],1)},n=[],s=r(6198),o=(r(5666),r(8309),r(2526),r(1817),{data:function(){return{number:-1,sending:!1,text:"",modalSubmitting:!1,products2:[],form:{user:"",name:"",description:"",_id:"",message:""},discuss:!1,dialog:!1,dialog1:!1,dialogDelete:!1,editedIndex:-1}},computed:{state:function(){return{name:0!==this.form.name.length||null}}},created1:function(){this.initialize()},methods:{submitModal:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.state.name){t.next=2;break}return t.abrupt("return");case 2:for(a in e.modalSubmitting=!0,r=new FormData,e.form)"_id"!==a&&r.append(a,e.form[a]);if(t.prev=5,0!==e.form._id.length){t.next=14;break}return t.next=9,e.api.post("/board",r,{headers:{authorization:"Bearer "+e.user.token}});case 9:n=t.sent,s=n.data,console.log(s.result),e.products2.push(s.result),e.dialog1=!1;case 14:e.modalSubmitting=!1,e.form={name:"",description:"",_id:""},t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](5),e.$swal({icon:"error",title:"錯誤",text:t.t0.response.data.message});case 21:case"end":return t.stop()}}),t,null,[[5,18]])})))()},discussopen:function(e){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.discuss=!0,t.form.name=e.name,t.form.user=t.form._id=e._id,t.form.description=e.description,t.form.messages=e.messages,t.number=t.products2.indexOf(e);case 6:case"end":return r.stop()}}),r)})))()},sendmessage:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.post("/board/"+e.form._id,{text:e.text,account:e.user.account},{headers:{authorization:"Bearer "+e.user.token}});case 3:r=t.sent,a=r.data,e.products2[e.number].messages.push(a.result.messages[a.result.messages.length-1]),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:e.sending=!1,e.text="";case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},created:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.get("/board/all",{headers:{authorization:"Bearer "+e.user.token}});case 3:r=t.sent,a=r.data,e.products2=a.result,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0),e.$swal({icon:"error",title:"錯誤",text:"取得商品失敗"});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}),i=o,c=r(1001),d=r(3453),u=r.n(d),l=r(680),m=r(3237),v=r(7118),p=r(2102),f=r(4228),x=r(4497),g=r(1418),h=r(6232),_=r(6428),b=r(2877),k=r(9762),w=r(5978),Z=r(4350),C=r(6656),V=(0,c.Z)(i,a,n,!1,null,"42eea683",null),y=V.exports;u()(V,{VBtn:l.Z,VCard:m.Z,VCardActions:v.h7,VCardText:v.ZB,VCol:p.Z,VContainer:f.Z,VDialog:x.Z,VDivider:g.Z,VForm:h.Z,VIcon:_.Z,VRow:b.Z,VSpacer:k.Z,VTextField:w.Z,VTextarea:Z.Z,VToolbar:C.Z})}}]);
//# sourceMappingURL=board-legacy.760dfadf.js.map