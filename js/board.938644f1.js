"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[198],{6688:function(t,s,e){e.r(s),e.d(s,{default:function(){return Z}});var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-app",[e("v-dialog",{attrs:{id:"modal-product",persistent:"","max-width":"1000"},scopedSlots:t._u([{key:"activator",fn:function(s){var a=s.on,r=s.attrs;return[e("v-btn",t._g(t._b({staticClass:"additem",attrs:{color:"primary",dark:"",width:"250px"}},"v-btn",r,!1),a),[t._v(" 我要發問 ")])]}}]),model:{value:t.dialog1,callback:function(s){t.dialog1=s},expression:"dialog1"}},[e("div",{staticClass:"container01"},[e("v-card",[e("v-container",[e("v-form",{ref:"form"},[e("v-text-field",{attrs:{type:"text",required:"",placeholder:"請輸入討論主題",state:t.state.name,outlined:""},model:{value:t.form.name,callback:function(s){t.$set(t.form,"name",s)},expression:"form.name"}})],1),e("v-form",{ref:"form"},[e("v-textarea",{staticClass:"mt-10",attrs:{state:t.state.description,required:"",rows:"3","max-rows":"6",placeholder:"請描述問題",color:"teal"},model:{value:t.form.description,callback:function(s){t.$set(t.form,"description",s)},expression:"form.description"}})],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"green darken-1",text:"",disabled:t.modalSubmitting},on:{click:t.submitModal}},[t._v(" 送出 ")]),e("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(s){t.dialog1=!1}}},[t._v(" 取消 ")])],1)],1)],1)],1)]),e("v-container",{attrs:{"mt-16":""}},[e("v-row",t._l(t.products2,(function(s){return e("v-col",{key:s._id,attrs:{align:"center",justify:"center",cols:"12",md:"6",lg:"3",xl:"3"}},[e("v-card",{staticClass:"discuss",attrs:{"max-width":"250"}},[e("h1",[t._v("主題:"+t._s(s.name))]),e("v-card-text"),e("v-card-text",[t._v(t._s(s.description)+" ")]),e("v-divider",{staticClass:"mx-4"}),e("v-card-actions",[e("v-icon",[t._v("mdi-account")]),e("p",{staticClass:"mt-4"},[t._v(t._s(t.user.account))]),e("v-spacer"),e("v-btn",{on:{click:function(e){return t.discussopen(s)}}},[t._v("cc ")])],1)],1)],1)})),1),e("v-dialog",{attrs:{"max-width":"900"},model:{value:t.discuss,callback:function(s){t.discuss=s},expression:"discuss"}},[e("v-card",{attrs:{"mt-10":""}},[e("v-container",[e("v-toolbar",{attrs:{color:"primary",dark:""}},[e("h1",[t._v("主題:"+t._s(t.form.name))])]),e("v-card-text",[e("v-card-text",[t._v("描述: "+t._s(t.form.description))]),e("v-divider",{staticClass:"mx-4 my-4"}),t._l(t.form.messages,(function(s){return e("v-card-text",{key:s._D,attrs:{"d-flex":""}},[e("v-row",{staticClass:"d-flex"},[e("v-icon",[t._v("mdi-account")]),e("p",{staticClass:"my-5"},[t._v(t._s(s.account)+":"+t._s(s.text))]),e("v-spacer"),e("p",{staticClass:"my-5"},[t._v(t._s(s.date))])],1),e("v-divider",{staticClass:"mx-4 my-4"})],1)}))],2),e("v-text-field",{attrs:{outlined:"","append-outer-icon":"mdi-send"},on:{"click:append-outer":function(s){return t.sendmessage()}},model:{value:t.text,callback:function(s){t.text=s},expression:"text"}})],1)],1)],1)],1)],1)},r=[],i={data(){return{number:-1,sending:!1,text:"",modalSubmitting:!1,products2:[],form:{user:"",name:"",description:"",_id:"",message:""},discuss:!1,dialog:!1,dialog1:!1,dialogDelete:!1,editedIndex:-1}},computed:{state(){return{name:0!==this.form.name.length||null}}},created1(){this.initialize()},methods:{async submitModal(){if(!this.state.name)return;this.modalSubmitting=!0;const t=new FormData;for(const e in this.form)"_id"!==e&&t.append(e,this.form[e]);try{if(0===this.form._id.length){const{data:s}=await this.api.post("/board",t,{headers:{authorization:"Bearer "+this.user.token}});console.log(s.result),this.products2.push(s.result),this.dialog1=!1}this.modalSubmitting=!1,this.form={name:"",description:"",_id:""}}catch(s){this.$swal({icon:"error",title:"錯誤",text:s.response.data.message})}},async discussopen(t){this.discuss=!0,this.form.name=t.name,this.form.user=this.form._id=t._id,this.form.description=t.description,this.form.messages=t.messages,this.number=this.products2.indexOf(t)},async sendmessage(){try{const{data:t}=await this.api.post("/board/"+this.form._id,{text:this.text,account:this.user.account},{headers:{authorization:"Bearer "+this.user.token}});this.products2[this.number].messages.push(t.result.messages[t.result.messages.length-1])}catch(t){console.log(t)}this.sending=!1,this.text=""}},async created(){try{const{data:t}=await this.api.get("/board/all",{headers:{authorization:"Bearer "+this.user.token}});this.products2=t.result}catch(t){console.log(t),this.$swal({icon:"error",title:"錯誤",text:"取得商品失敗"})}}},o=i,n=e(1001),c=e(3453),d=e.n(c),l=e(7524),m=e(680),u=e(3237),v=e(7118),h=e(2102),p=e(4228),f=e(4497),x=e(1418),g=e(6232),_=e(6428),b=e(2877),k=e(9762),y=e(5978),C=e(4350),w=e(6656),V=(0,n.Z)(o,a,r,!1,null,"59567533",null),Z=V.exports;d()(V,{VApp:l.Z,VBtn:m.Z,VCard:u.Z,VCardActions:v.h7,VCardText:v.ZB,VCol:h.Z,VContainer:p.Z,VDialog:f.Z,VDivider:x.Z,VForm:g.Z,VIcon:_.Z,VRow:b.Z,VSpacer:k.Z,VTextField:y.Z,VTextarea:C.Z,VToolbar:w.Z})}}]);
//# sourceMappingURL=board.938644f1.js.map